


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    
  <title>K.I.S Bear</title>
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/blog/feed" />
<link rel="alternate" type="application/atom+xml" title="Atom 1.0"
href="/blog/feed/atom" />
<link rel='stylesheet' href='/styles/screen.css' type='text/css' />


  </head>
  <body>
    <div id="wrapper">
      <div id="content">
        
  
<div class="hentry">
  <h3 class="entry-title">
    <a href="/blog/2011/11/23/build-cx-oracle-for-python" rel="bookmark" title="Permanent Link to cx_Oracle 编译安装及简单使用方法">cx_Oracle 编译安装及简单使用方法</a> 
    <abbr> · 2011/11/23 · 


<a href='/blog/category/python'>Python</a>

</abbr> 

  </h3>

    
  <p>cx_Oracle 是Python的一个扩展模块，提供符合Python数据库API规范的Oracle访问支持，是Python下访问Oracle的利器，不过鉴于其版本众多，很多人在安装上就遇到了障碍，我这里简单记录一下。<br />
最普适的方法就是编译安装了，官方有详尽的<a href="http://cx-oracle.sourceforge.net/BUILD.txt">安装文档</a>，我这里基本只是翻译。</p>
<h2>准备</h2>
<p>首先下载两个东西：</p>
<ul>
<li><a href="http://cx-oracle.sourceforge.net/">cx_Oracle</a> </li>
<li><a href="http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html">Oracle Instant Client</a>. Oracle官方提供的轻量客户端组件，需要同时下载 instantclient-linux-basic 和 instantclient-sdk-linux 并<code>解压到同一目录</code>。</li>
</ul>
<p>然后设置环境变量，最好写到profile文件里<br />
</p>
<pre><code>export ORACLE_HOME=[你的解压目录]/instantclient_11_1
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:$ORACLE_HOME
</code></pre>
<p>MAC OS X 下还需设置另一个环境变量</p>
<pre><code>export DYLD_LIBRARY_PATH=$ORACLE_HOME
</code></pre>
<p>然后做一下软链</p>
<pre><code>cd $ORACLE_HOME
ln -s libclntsh.so.x.x libclntsh.so
</code></pre>
<h2>编译安装</h2>
<p>接下来非常简单，进入你的cx_Oracle源码目录后执行以下两条语句就OK了</p>
<pre><code>python setup.py build
python setup.py install
</code></pre>
<p>测试是否正常</p>
<pre><code>$ python
Python 2.5.2 (r252:60911, Oct 25 2008, 19:37:28)
[GCC 4.1.2 (Gentoo 4.1.2 p1.1)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
&gt;&gt;&gt; import cx_Oracle
&gt;&gt;&gt;
</code></pre>
<p>没有异常的话就说明安装成功了。</p>
<h2>简单的使用</h2>
<pre><code>#!/usr/bin/python
# -*- encoding: utf-8 -*-
import cx_Oracle

try:
  db = cx_Oracle.connect('username','passwd','host:port/dsn')
  cursor=db.cursor()
  cursor.execute(sql)
  #查询
  for column, in cursor:#注意只有一列的时候也要后面加','来解包
    #do something
  #取一列
  row = cursor.fetchone()
  #带名字参数的查询
  cursor.execute(
    'select * from table where id = :id ',{'id':5,})
  #按位置参数的查询
  cursor.execute(
    'select * from table where id = :1',
    (id,))#注意只有一个参数时也要加','参数是元组

  cursor.close()
  db.close()
except cx_Oracle.DatabaseError, e:
  print e
  sys.exit(2)
</code></pre>
<p>最后，连接默认是没有设置autocommit的，更删改的话需要commit。</p>


</div>



  
<div class="hentry">
  <h3 class="entry-title">
    <a href="/blog/2011/11/22/blog-started-up" rel="bookmark" title="Permanent Link to Blog Started Up">Blog Started Up</a> 
    <abbr> · 2011/11/22 · 


<a href='/blog/category/life'>Life</a>

</abbr> 

  </h3>

    
  <p>经过一番思想斗争，决定还是找个地方写点东西，用冯唐的话说，用文字打败时间:D</p>
<h2>域名</h2>
<p>照例在Godaddy上买的域名，本来想用自己其他的域名，后来想想还是用likang.me吧，幸好没被注册掉:)</p>
<p>过程中发现貌似Godaddy跟支付宝的合作结束了，网站上没有支付宝的付款选项了，只好刷了信用卡，在盗卡盛行的今天，这是我在第二个网站上直接填写信用卡信息付款(第一家是Apple的AppStore)，心里还是有点不靠谱的感觉的=.=<br />
<em>注：好吧现在发现支付宝又神奇的出现在Godaddy上了</em></p>
<h2>托管方案</h2>
<p>这个过程让真是高潮迭起=.= 一开始是要用Godaddy提供的免费hosting + Wordpress的，况且使用Windows + IIS7的方案的话Wordpress上还没有广告，但是速度不理想，没办法，放弃。<br />
</p>
<p>于是跑去新浪的SAE(Sina App Engine)，SAE做的还是不错的，提供的一系列分布式服务用起来都很方便，而且速度也不错。但是要命的是绑定域名的话需要提供备案信息:( 不是我不想备案，只是像我这样国内没有主机的备案起来实在是不可能的事。于是想想算了吧，还是另寻他处。<br />
(BTW: SAE上有开发奖励，我决定做点东西赚赚云豆攒起来:D )<br />
</p>
<p>然后想起Github上是有Pages服务的，我就搜了一下有没有方便的工具来扩展这个看似简单的功能。一搜发现我真是孤陋寡闻，竟然很早就已经有成熟的Jekyll和Octopress了，虽然暂时我对Ruby不感冒，但粗看之后我立即被这个简单强大优雅的东东给吸引了，而且Github还非常给力的支持域名绑定，于是我毫不犹豫的就动手把环境搭起来了:)</p>
<p>于是最终就是这个样子啦，Octopress + Github，万事俱备:D</p>


</div>



<div id="pagination">
 <p class="next right">
   <a href="../1">NEWER POSTS »</a>
 </p>
</div>
<div class="clear"></div>

      </div><!-- End Main Block -->
      
  <div id="sidebar">
  <div class="widget">
    <h1 id="branding">
      <a href="/">K.I.S Bear</a>
    </h1>
  </div>
  <nav>
    <ul>
      <li><a href="https://github.com/likang">Github</a></li>
      <li><a href="/blog">Archive</a></li>
      <li><a href="/blog/feed">Subscribe</a></li>
  </nav>
</div>


      <div class="clear"></div><!-- End Sitebar -->
      <div id="footer">
        
  <p id="credits">
Powered by <a href="http://www.blogofile.com">Blogofile</a>. 
<br>
</p>


      </div> <!-- End Footer -->
    </div> <!-- End Content -->
  </body>
</html>




